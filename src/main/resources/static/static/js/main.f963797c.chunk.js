(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{106:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(37),s=n.n(c),r=(n(114),n(115),n(116),n(117),n(139),n(12)),o=n(4),d=n(6),l=n(7),h=n(10),b=n(9),j="http://localhost:8081/",u=function(){function e(){Object(d.a)(this,e)}return Object(l.a)(e,null,[{key:"login",value:function(e,t,n){fetch(j+"api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){var a=e.headers.get("Authorization");null!==a?(sessionStorage.setItem("jwt",a),t()):n()})).catch((function(e){return console.error(e)}))}},{key:"logout",value:function(){sessionStorage.removeItem("jwt")}}]),e}();u.isAuthenticated=null!==sessionStorage.getItem("jwt");var m=u,p=n(0),O=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(p.jsxs)("div",{className:"container-fluid",children:[Object(p.jsx)("a",{className:"navbar-brand",href:"/",children:Object(p.jsx)("i",{id:"page-logo",className:"fas fa-utensils"})}),Object(p.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(p.jsx)("span",{className:"navbar-toggler-icon"})}),Object(p.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(p.jsx)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"}),Object(p.jsx)("ul",{className:"navbar-nav",children:Object(p.jsxs)("li",{className:"nav-item",children:[m.isAuthenticated&&Object(p.jsx)("form",{onSubmit:this.handleLogout,children:Object(p.jsx)("button",{type:"submit",className:"nav-link active",children:"Logout"})}),!m.isAuthenticated&&Object(p.jsx)("a",{href:"/#",className:"nav-link active",children:"Login"})]})})]})]})})}},{key:"handleLogout",value:function(){m.logout()}}]),n}(a.Component),g=O,f=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return m.isAuthenticated&&n.e(3).then(n.t.bind(null,245,7)),Object(p.jsx)("aside",{className:"bd-sidebar"+this.props.x,children:Object(p.jsxs)("div",{className:"flex-shrink-0 p-3 bg-white",style:{width:280},children:[Object(p.jsx)("a",{href:"/admin/home",className:"d-flex align-items-center pb-3 mb-3 link-dark text-decoration-none border-bottom",children:Object(p.jsx)("span",{className:"fs-5 fw-semibold",children:"Admin Dashboard"})}),Object(p.jsxs)("ul",{className:"list-unstyled ps-0",children:[Object(p.jsxs)("li",{className:"mb-1",children:[Object(p.jsx)("button",{className:"btn btn-toggle align-items-center rounded collapsed","data-bs-toggle":"collapse",id:"platforms-btn","data-bs-target":"#platforms","aria-expanded":"false",children:"Categories"}),Object(p.jsx)("div",{className:"collapse",id:"platforms",children:Object(p.jsxs)("ul",{className:"btn-toggle-nav list-unstyled fw-normal pb-1 small",children:[Object(p.jsx)("li",{children:Object(p.jsx)(r.b,{id:"show-platforms-link",to:"/admin/category",className:"link-dark rounded",children:"Show categories"})}),Object(p.jsx)("li",{children:Object(p.jsx)(r.b,{id:"add-platform-link",to:"/admin/category/create",className:"link-dark rounded",children:"Add category"})})]})})]}),Object(p.jsxs)("li",{className:"mb-1",children:[Object(p.jsx)("button",{className:"btn btn-toggle align-items-center rounded collapsed","data-bs-toggle":"collapse",id:"add-chapter-btn","data-bs-target":"#chapters","aria-expanded":"false",children:"Recipes"}),Object(p.jsx)("div",{className:"collapse",id:"chapters",children:Object(p.jsxs)("ul",{className:"btn-toggle-nav list-unstyled fw-normal pb-1 small",children:[Object(p.jsx)("li",{children:Object(p.jsx)(r.b,{id:"show-chapters-link",to:"/admin/recipes",className:"link-dark rounded",children:"Show recipes"})}),Object(p.jsx)("li",{children:Object(p.jsx)(r.b,{id:"add-chapters-link",to:"/admin/recipes/create",className:"link-dark rounded",children:"Add recipe"})})]})})]})]})]})})}}]),a}(a.Component),x=Object(o.g)(f),v=n(8),y=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={recipeCategs:[]},a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a}return Object(l.a)(n,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch(j+"api/recipeCategories/"+e.target.id.value,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:sessionStorage.getItem("jwt")},body:JSON.stringify({id:e.target.id.value})}).then((function(){t.componentDidMount()}))}},{key:"render",value:function(){var e=this,t=this.state.recipeCategs.map((function(t,n){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.name}),Object(p.jsxs)("td",{children:[Object(p.jsx)(r.b,{className:"btn btn-primary",to:"/admin/category/"+t.id+"/edit",children:"Edit"}),Object(p.jsxs)("form",{style:{display:"inline"},onSubmit:e.handleSubmit,children:[Object(p.jsx)("input",{type:"hidden",name:"id",value:t.id}),Object(p.jsx)("button",{className:"btn btn-danger",type:"submit",children:"Delete"})]})]})]},n)}));return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"page-content",children:[Object(p.jsx)("h1",{className:"page-title",children:"Recipe categories"}),Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Name"}),Object(p.jsx)("td",{children:"Action"})]})}),Object(p.jsx)("tbody",{children:t})]})]})})}},{key:"componentDidMount",value:function(){var e=this;document.title="Admin | Re\u021bete",fetch(j+"api/recipeCategories",{}).then((function(t){t.json().then((function(t){e.setState({recipeCategs:t._embedded.recipeCategories})}))})).catch((function(e){return console.error(e)}))}}]),n}(a.Component),C=Object(o.g)(y),S=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={value:""},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a}return Object(l.a)(n,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch(j+"api/recipeCategories",{method:"POST",headers:{"Content-Type":"application/json",Authorization:sessionStorage.getItem("jwt")},body:JSON.stringify({name:this.state.value})}).then((function(){t.props.history.push("/admin/category")}))}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"page-content",children:[Object(p.jsx)("h1",{className:"page-title",children:"Add recipe category"}),Object(p.jsxs)("form",{className:"row g-3",id:"form",method:"post",onSubmit:this.handleSubmit,children:[Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"name",onChange:this.handleChange})}),Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})]})})}}]),n}(a.Component),N=Object(o.g)(S),k=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{children:["Not Found ",this.props.x]})}}]),n}(a.Component),w=k,E=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={id:0,name:""},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a}return Object(l.a)(n,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch(j+"api/recipeCategories/"+this.props.match.params.id,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:sessionStorage.getItem("jwt")},body:JSON.stringify({id:this.state.id,name:this.state.name})}).then((function(){t.props.history.push("/admin/category")}))}},{key:"handleChange",value:function(e){this.setState({name:e.target.value})}},{key:"render",value:function(){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"page-content",children:[Object(p.jsx)("h1",{className:"page-title",children:"Edit recipe category"}),Object(p.jsxs)("form",{className:"row g-3",id:"form",method:"post",onSubmit:this.handleSubmit,children:[Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:this.handleChange})}),Object(p.jsx)("div",{className:"col-auto",children:Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})]})})}},{key:"componentDidMount",value:function(){var e=this;document.title="Editare re\u021bet\u0103 | Re\u021bete",fetch(j+"api/recipeCategories/"+this.props.match.params.id).then((function(e){return e.json()})).then((function(t){e.setState({id:t.id,name:t.name})})).catch((function(e){return console.error(e)}))}}]),n}(a.Component),A=Object(o.g)(E),D=n(31),T=n(49),I=n(23),P=(n(105),n(50)),R=n.n(P),L=(n(106),function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).onEditorStateChange=function(e){a.setState({editorState:e,content:R()(Object(I.convertToRaw)(e.getCurrentContent()))})},a.state={categoryId:"http://localhost:8080/api/recipeCategories/1",name:"",content:"",recipeCategs:[],photo:"",editorState:I.EditorState.createEmpty()},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.fileInput=i.a.createRef(),a}return Object(l.a)(n,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FormData;n.append("image",this.state.photo),n.append("recipe",JSON.stringify({name:this.state.name,content:this.state.content,category:{id:this.state.categoryId}})),fetch(j+"api/recipe/save",{method:"POST",headers:{Authorization:sessionStorage.getItem("jwt")},body:n}).then((function(){t.props.history.push("/admin/recipes")})).catch((function(e){return console.error(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name;"photo"===a&&(n=t.files[0]),this.setState(Object(D.a)({},a,n))}},{key:"render",value:function(){var e=this.state.editorState;return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"page-content",children:[Object(p.jsx)("h1",{className:"page-title",children:"Add recipe"}),Object(p.jsxs)("form",{id:"form-chapter",method:"POST",onSubmit:this.handleSubmit,children:["Category:"," ",Object(p.jsx)("select",{className:"mb-4",onChange:this.handleChange,children:this.state.recipeCategs.map((function(e,t){return Object(p.jsx)("option",{value:e.id,children:e.name},t)}))}),Object(p.jsxs)("div",{className:"form-group mb-4",children:["Name:"," ",Object(p.jsx)("input",{type:"text",name:"name",onChange:this.handleChange})]}),Object(p.jsxs)("div",{className:"form-group mb-4",children:["Photo:"," ",Object(p.jsx)("input",{type:"file",name:"photo",onChange:this.handleChange})]}),Object(p.jsx)("div",{id:"editor-wrapper",children:Object(p.jsx)(T.Editor,{editorState:e,wrapperClassName:"wrapper-draft",editorClassName:"editor-draft",toolbarClassName:"toolbar-draft",onEditorStateChange:this.onEditorStateChange})}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})})}},{key:"componentDidMount",value:function(){var e=this;document.title="Create recipe | Re\u021bete",fetch(j+"api/recipeCategories").then((function(e){return e.json()})).then((function(t){e.setState({recipeCategs:t._embedded.recipeCategories,categoryId:t._embedded.recipeCategories[0].id})})).catch((function(e){return console.error(e)}))}}]),n}(a.Component)),M=Object(o.g)(L),F=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={recipes:[]},a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a}return Object(l.a)(n,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch(j+"api/recipes/"+e.target.id.value,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:sessionStorage.getItem("jwt")},body:JSON.stringify({id:e.target.id.value})}).then((function(){t.componentDidMount()}))}},{key:"render",value:function(){var e=this,t=this.state.recipes.map((function(t,n){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.name}),Object(p.jsx)("td",{children:t.category.name}),Object(p.jsxs)("td",{children:[Object(p.jsx)(r.b,{className:"btn btn-primary",to:"/admin/recipes/"+t.id+"/edit",children:"Edit"}),Object(p.jsxs)("form",{style:{display:"inline"},onSubmit:e.handleSubmit,children:[Object(p.jsx)("input",{type:"hidden",name:"id",value:t.id}),Object(p.jsx)("button",{className:"btn btn-danger",type:"submit",children:"Delete"})]})]})]},n)}));return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"page-content",children:[Object(p.jsx)("h1",{className:"page-title",children:"Recipes"}),Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Name"}),Object(p.jsx)("td",{children:"Category"}),Object(p.jsx)("td",{children:"Action"})]})}),Object(p.jsx)("tbody",{children:t})]})]})})}},{key:"componentDidMount",value:function(){var e=this;document.title="Admin | Re\u021bete",fetch(j+"api/recipes").then((function(e){return e.json()})).then((function(t){e.setState({recipes:t._embedded.recipes})})).catch((function(e){return console.error(e)}))}}]),n}(a.Component),J=Object(o.g)(F),z=n(109),_=n.n(z),B=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).onEditorStateChange=function(e){a.setState({editorState:e,content:R()(Object(I.convertToRaw)(e.getCurrentContent()))})},a.state={categoryId:0,content:"",name:"",recipeCategs:[],photo:"",editorState:I.EditorState.createEmpty(),recipe:{}},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.fileInput=i.a.createRef(),a}return Object(l.a)(n,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=new FormData;n.append("image",this.state.photo),n.append("recipe",JSON.stringify({id:this.state.recipe.id,name:this.state.name,content:this.state.content,category:{id:this.state.categoryId}})),fetch(j+"api/recipe/update",{method:"PATCH",headers:{Authorization:sessionStorage.getItem("jwt")},body:n}).then((function(){t.props.history.push("/admin/recipes")})).catch((function(e){return console.error(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name;"photo"===a&&(n=t.files[0]),this.setState(Object(D.a)({},a,n))}},{key:"render",value:function(){var e=this.state.editorState;return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"page-content",children:[Object(p.jsx)("h1",{className:"page-title",children:"Edit recipe"}),Object(p.jsxs)("form",{id:"form-chapter",method:"POST",onSubmit:this.handleSubmit,children:["Category:"," ",Object(p.jsx)("select",{className:"mb-4",onChange:this.handleChange,children:this.state.recipeCategs.map((function(e,t){return Object(p.jsx)("option",{value:e.id,children:e.name},t)}))}),Object(p.jsxs)("div",{className:"form-group mb-4",children:["Name:\xa0",Object(p.jsx)("input",{type:"text",value:this.state.name,name:"name",onChange:this.handleChange})]}),Object(p.jsxs)("div",{className:"form-group mb-4",children:[this.state.recipe.id&&Object(p.jsx)("img",{src:j+"uploads/recipe"+this.state.recipe.id+".jpg",alt:"img"}),"Photo:\xa0",Object(p.jsx)("input",{type:"file",name:"photo",onChange:this.handleChange})]}),Object(p.jsx)("div",{id:"editor-wrapper",children:Object(p.jsx)(T.Editor,{editorState:e,wrapperClassName:"wrapper-draft",editorClassName:"editor-draft",toolbarClassName:"toolbar-draft",onEditorStateChange:this.onEditorStateChange})}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})})}},{key:"componentDidMount",value:function(){var e=this;document.title="Create recipe | Recipes",fetch(j+"api/recipeCategories/").then((function(e){return e.json()})).then((function(t){e.setState({recipeCategs:t._embedded.recipeCategories})})).catch((function(e){return console.error(e)})),fetch(j+"api/recipes/"+this.props.match.params.id).then((function(e){return e.json()})).then((function(t){e.setState({recipe:t,categoryId:t.category.id,name:t.name,editorState:I.EditorState.createWithContent(I.ContentState.createFromBlockArray(_()(t.content)))})})).catch((function(e){return console.error(e)}))}}]),n}(a.Component),H=Object(o.g)(B),U=n(51),W=(n(240),function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a}return Object(l.a)(n,[{key:"handleSubmit",value:function(e){e.preventDefault(),m.login(this.state,(function(){window.location.href="/admin"}),(function(){U.b.warn("Check your username and password",{position:U.b.POSITION.BOTTOM_LEFT})}))}},{key:"handleChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"page-content",children:Object(p.jsxs)("form",{action:"/api/login",method:"post",className:"g-3 login-form",id:"form",onSubmit:this.handleSubmit,children:[Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{children:"Username:"}),Object(p.jsx)("input",{className:"form-control",name:"username",onChange:this.handleChange})]}),Object(p.jsxs)("div",{className:"mb-3",children:[Object(p.jsx)("label",{children:"Password:"}),Object(p.jsx)("input",{className:"form-control",name:"password",onChange:this.handleChange})]}),Object(p.jsx)(U.a,{autoClose:5e3}),Object(p.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Login"})]})})}},{key:"componentDidMount",value:function(){document.title="Login | Retete"}}]),n}(a.Component)),q=Object(o.g)(W);var G=function(){return m.isAuthenticated?Object(p.jsx)(r.a,{children:Object(p.jsxs)("div",{children:[Object(p.jsx)(g,{}),"/admin/login"!==window.location.pathname&&Object(p.jsx)(x,{}),Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{exact:!0,path:"/admin"}),Object(p.jsx)(o.b,{exact:!0,path:"/admin/login",component:q}),Object(p.jsx)(o.b,{exact:!0,path:"/admin/category",component:C}),Object(p.jsx)(o.b,{exact:!0,path:"/admin/category/create",component:N}),Object(p.jsx)(o.b,{exact:!0,path:"/admin/category/:id/edit",component:A}),Object(p.jsx)(o.b,{exact:!0,path:"/admin/recipes",component:J}),Object(p.jsx)(o.b,{exact:!0,path:"/admin/recipes/create",component:M}),Object(p.jsx)(o.b,{exact:!0,path:"/admin/recipes/:id/edit",component:H}),Object(p.jsx)(o.b,{path:"*",children:Object(p.jsx)(w,{})})]})]})}):Object(p.jsx)(r.a,{children:Object(p.jsxs)("div",{children:[Object(p.jsx)(g,{}),Object(p.jsx)(o.a,{to:"/admin/login"}),Object(p.jsx)(o.d,{children:Object(p.jsx)(o.b,{exact:!0,path:"/admin/login",component:q})})]})})},K=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,246)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))};s.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(G,{})}),document.getElementById("root")),K()}},[[242,1,2]]]);
//# sourceMappingURL=main.f963797c.chunk.js.map